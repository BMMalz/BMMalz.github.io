<!DOCTYPE html>

<!-- cookiesFinal2.html -->

<html>
<head>
   <title>Final Exam</title>
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
</head>
<body>
<input type="text" id="gradeInput"><input type="button" id="submitGrade" value="Enter grade"><br>
Your grades so far: <span id="theOutput"></span><br>
Your average: <span id="avgOutput"></span>

<script>
    $(document).ready(function(){
         gradeOne = getCookie("grade1");
         gradeTwo = getCookie("grade2");
         gradeThree = getCookie("grade3");
         gradeFour = getCookie("grade4");
         gradeFive = getCookie("grade5");
         $("#theOutput").html("");
         if (gradeOne !== "")
         {
            $("#theOutput").append(gradeOne);
            avgGrade = parseFloat(gradeOne);
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeTwo !== "")
         {
            $("#theOutput").append(", " + gradeTwo);
            avgGrade = (parseFloat(gradeOne) * (1/3)) + (parseFloat(gradeTwo) * 2/3);
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeThree !== "")
         {
            $("#theOutput").append(", " + gradeThree);
            avgGrade = (parseFloat(gradeOne) * (1/6)) + (parseFloat(gradeTwo) * (2/6)) + (parseFloat(gradeThree) * (3/6));
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeFour !== "")
         {
            $("#theOutput").append(", " + gradeFour);
            avgGrade = (parseFloat(gradeOne) * (1/8)) + (parseFloat(gradeTwo) * (2/8)) + (parseFloat(gradeThree) * (3/8)) + (parseFloat(gradeFour) * (2/8));
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeFive !== "")
         {
            $("#theOutput").append(", " + gradeFive);
            avgGrade = (parseFloat(gradeOne) * (1/10)) + (parseFloat(gradeTwo) * (2/10)) + (parseFloat(gradeThree) * (3/10)) + (parseFloat(gradeFour) * (2/10)) + (parseFloat(gradeFive) * (2/10));
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
        });
   
   $("#submitGrade").click(addGrade);
	var i = 1;
	function addGrade () {
         var avgGrade = 0;
         if (i < 6)
         {
			setCookie ("grade" + i, $("#gradeInput").val(), 365);
			i++;
         gradeOne = getCookie("grade1");
         gradeTwo = getCookie("grade2");
         gradeThree = getCookie("grade3");
         gradeFour = getCookie("grade4");
         gradeFive = getCookie("grade5");
         $("#theOutput").html("");
         if (gradeOne !== "")
         {
            $("#theOutput").append(gradeOne);
            avgGrade = parseFloat(gradeOne);
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeTwo !== "")
         {
            $("#theOutput").append(", " + gradeTwo);
            avgGrade = (parseFloat(gradeOne) * (1/3)) + (parseFloat(gradeTwo) * 2/3);
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeThree !== "")
         {
            $("#theOutput").append(", " + gradeThree);
            avgGrade = (parseFloat(gradeOne) * (1/6)) + (parseFloat(gradeTwo) * (2/6)) + (parseFloat(gradeThree) * (3/6));
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeFour !== "")
         {
            $("#theOutput").append(", " + gradeFour);
            avgGrade = (parseFloat(gradeOne) * (1/8)) + (parseFloat(gradeTwo) * (2/8)) + (parseFloat(gradeThree) * (3/8)) + (parseFloat(gradeFour) * (2/8));
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         if (gradeFive !== "")
         {
            $("#theOutput").append(", " + gradeFive);
            avgGrade = (parseFloat(gradeOne) * (1/10)) + (parseFloat(gradeTwo) * (2/10)) + (parseFloat(gradeThree) * (3/10)) + (parseFloat(gradeFour) * (2/10)) + (parseFloat(gradeFive) * (2/10));
            $("#avgOutput").html(avgGrade.toFixed(1));
         }
         }
         else{
            alert("You've already put in 5 grades!");
         }
	}
	

	function setCookie (name, value, numDays) {
	    var date = new Date();
	    // getTime() gets today's date in milliseconds as of 01/01/1970
	    date.setTime (date.getTime() + (1000 * 60 * 60 * 24 * numDays));
	    //                              milli  sec  min  hr   days
	    // converted to total milliseconds to add to today
	    var expires = "expires=" + date.toUTCString();
	    document.cookie = name + "=" + value + ";" + expires + ";path=/";
	}

	function getCookie (name) {
	// return value of cookie with specified name
	    var searchName = name + "=";				
	    var decodedCookie = decodeURIComponent (document.cookie);	
	    var carray = decodedCookie.split(';');			
	    var i, oneCookie;

	    for (i = 0; i < carray.length; i++) {		
                oneCookie = carray[i];				
	 	while (oneCookie.charAt(0) == ' ') {		
		    oneCookie = oneCookie.substring(1);
		}
		if (oneCookie.indexOf(searchName) === 0) {
		    return oneCookie.substring (searchName.length, oneCookie.length);
		}
	    }
	    return "";   // fail
	}

	function delCookie (name) {
	    // delete a cookie with given name
	    // either of these works
	    // document.cookie = name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/";
	    document.cookie = name + "=; expires=; path=/";
	}
</script>

</body>
</html>
